---------------------------------------------------------- Docker Engine ----------------------------------------------------------------------
# 1. Installation
mkdir passbolt-docker && cd passbolt-docker
# CrÃ©er le docker-compose.yml avec la premiÃ¨re configuration

# =================================================
# PASSBOLT - DÃ‰PLOIEMENT AVEC DOCKER ENGINE
# =================================================

services:
  # Base de donnÃ©es MariaDB
  database:
    image: mariadb:10.11
    container_name: passbolt_db
    environment:
      MARIADB_ROOT_PASSWORD: root_password_super_secret
      MARIADB_DATABASE: passbolt
      MARIADB_USER: passbolt
      MARIADB_PASSWORD: passbolt_password_secret
    volumes:
      - passbolt_db_data:/var/lib/mysql
    networks:
      - passbolt_network
    restart: unless-stopped
    command: --default-authentication-plugin=mysql_native_password

  # Application Passbolt
  passbolt:
    image: passbolt/passbolt:latest-ce
    container_name: passbolt_app
    ports:
      - "80:80"
      - "443:443"
    environment:
      # Configuration de l'application
      APP_FULL_BASE_URL: https://passbolt.local
      
      # Configuration de la base de donnÃ©es
      DATASOURCES_DEFAULT_HOST: database
      DATASOURCES_DEFAULT_USERNAME: passbolt
      DATASOURCES_DEFAULT_PASSWORD: passbolt_password_secret
      DATASOURCES_DEFAULT_DATABASE: passbolt
      
      # Configuration email (optionnel pour le test)
      EMAIL_DEFAULT_FROM: admin@passbolt.local
      EMAIL_TRANSPORT_DEFAULT_HOST: localhost
      EMAIL_TRANSPORT_DEFAULT_PORT: 25
      
      # ClÃ© GPG (gÃ©nÃ©rÃ©e automatiquement au premier dÃ©marrage)
      PASSBOLT_KEY_NAME: Passbolt Server
      PASSBOLT_KEY_EMAIL: admin@passbolt.local
      
    volumes:
      - passbolt_gpg:/etc/passbolt/gpg
      - passbolt_jwt:/etc/passbolt/jwt
      - passbolt_images:/usr/share/php/passbolt/webroot/img/public/images
    networks:
      - passbolt_network
    depends_on:
      - database
    restart: unless-stopped
    command: ["/usr/bin/wait-for.sh", "-t", "0", "database:3306", "--", "/docker-entrypoint.sh"]

networks:
  passbolt_network:
    driver: bridge

volumes:
  passbolt_db_data:
  passbolt_gpg:
  passbolt_jwt:
  passbolt_images:

# 2. DÃ©ploiement
docker compose up -d

# 3. VÃ©rification
docker compose ps
docker compose logs passbolt

# 4. CrÃ©ation admin
docker exec -it passbolt_app su -m -c "bin/cake passbolt register_user -u admin@passbolt.local -f Admin -l User -r admin" -s /bin/sh www-data

# 5. AccÃ¨s : https://passbolt.local
-------------------------------------------------------------- Portainer ------------------------------------------------------------------------

# 1. Installer Portainer d'abord
docker volume create portainer_data
docker run -d --name portainer --restart unless-stopped -p 9443:9443 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest

# 2. AccÃ©der Ã  Portainer : https://localhost:9443
# 3. CrÃ©er un compte admin
# 4. Aller dans "Stacks" > "Add Stack"
# 5. Coller la configuration Passbolt pour 

# =================================================
# PASSBOLT STACK POUR PORTAINER
# =================================================
# Ã€ copier-coller dans Portainer > Stacks > Add stack

services:
  # Base de donnÃ©es
  passbolt_db:
    image: mariadb:10.11
    environment:
      MARIADB_ROOT_PASSWORD: ChangeMe_RootPassword123!
      MARIADB_DATABASE: passbolt
      MARIADB_USER: passbolt
      MARIADB_PASSWORD: ChangeMe_PassboltPassword123!
    volumes:
      - passbolt_db_data:/var/lib/mysql
    networks:
      - passbolt_net
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "healthcheck.sh", "--connect", "--innodb_initialized"]
      start_period: 1m
      start_interval: 10s
      interval: 1m
      timeout: 5s
      retries: 3

  # Application Passbolt
  passbolt_app:
    image: passbolt/passbolt:4.7.0-1-ce
    ports:
      - "8081:80"
      - "8443:443"
    environment:
      # URL de ton instance (change selon ton setup)
      APP_FULL_BASE_URL: https://localhost:8443
      
      # Configuration base de donnÃ©es
      DATASOURCES_DEFAULT_HOST: passbolt_db
      DATASOURCES_DEFAULT_USERNAME: passbolt
      DATASOURCES_DEFAULT_PASSWORD: ChangeMe_PassboltPassword123!
      DATASOURCES_DEFAULT_DATABASE: passbolt
      
      # Configuration email (pour les invitations)
      EMAIL_DEFAULT_FROM: ismael.mouloungui@groupebatimat.com
      EMAIL_TRANSPORT_DEFAULT_HOST: localhost
      EMAIL_TRANSPORT_DEFAULT_PORT: 25
      
      # Configuration GPG
      PASSBOLT_KEY_NAME: epxa dngg suza ktyr
      PASSBOLT_KEY_EMAIL: ismael.mouloungui@groupebatimat.com
      
    volumes:
      - passbolt_gpg_data:/etc/passbolt/gpg
      - passbolt_jwt_data:/etc/passbolt/jwt
      - passbolt_images:/usr/share/php/passbolt/webroot/img/public/images
    networks:
      - passbolt_net
    depends_on:
      passbolt_db:
        condition: service_healthy
    restart: unless-stopped

networks:
  passbolt_net:
    driver: bridge

volumes:
  passbolt_db_data:
    driver: local
  passbolt_gpg_data:
    driver: local
  passbolt_jwt_data:
    driver: local
  passbolt_images:
    driver: local

# 6. Cliquer "Deploy the stack"
-------------------------------------------------- Gestion des mis Ã  jours -------------------------------------------------------------------------

# =================================================
# PASSBOLT AVEC GMAIL SMTP - DOCKER ENGINE
# =================================================

services:
  database:
    image: mariadb:10.11
    container_name: passbolt_db
    environment:
      MARIADB_ROOT_PASSWORD: ${DB_ROOT_PASSWORD:-root_password_super_secret}
      MARIADB_DATABASE: ${DB_NAME:-passbolt}
      MARIADB_USER: ${DB_USER:-passbolt}
      MARIADB_PASSWORD: ${DB_PASSWORD:-passbolt_password_secret}
    volumes:
      - passbolt_db_data:/var/lib/mysql
    networks:
      - passbolt_network
    restart: unless-stopped
    command: --default-authentication-plugin=mysql_native_password

  passbolt:
    image: passbolt/passbolt:4.7.0-1-ce
    container_name: passbolt_app
    ports:
      - "80:80"
      - "443:443"
    environment:
      # Configuration de base
      APP_FULL_BASE_URL: ${APP_URL:-https://localhost}
      
      # Configuration base de donnÃ©es
      DATASOURCES_DEFAULT_HOST: database
      DATASOURCES_DEFAULT_USERNAME: ${DB_USER:-passbolt}
      DATASOURCES_DEFAULT_PASSWORD: ${DB_PASSWORD:-passbolt_password_secret}
      DATASOURCES_DEFAULT_DATABASE: ${DB_NAME:-passbolt}
      
      # ğŸ¯ CONFIGURATION GMAIL SMTP
       EMAIL_TRANSPORT_DEFAULT_CLASS_NAME: Smtp
      EMAIL_DEFAULT_FROM_NAME: ${EMAIL_FROM_NAME:-Passbolt Admin}
      EMAIL_DEFAULT_FROM: ${EMAIL_FROM:-ismael.mouloungui@groupebatimat.com}
      EMAIL_TRANSPORT_DEFAULT_HOST: smtp.gmail.com
      EMAIL_TRANSPORT_DEFAULT_PORT: 587
      EMAIL_TRANSPORT_DEFAULT_USERNAME: ${GMAIL_USERNAME:-ismael.mouloungui@groupebatimat.com}
      EMAIL_TRANSPORT_DEFAULT_PASSWORD: ${GMAIL_APP_PASSWORD:-ton-mot-de-passe-app}
      EMAIL_TRANSPORT_DEFAULT_TLS: true
      EMAIL_TRANSPORT_DEFAULT_TIMEOUT: 30
      
      # Configuration GPG
      PASSBOLT_KEY_NAME: ${GPG_KEY_NAME:-Passbolt Server}
      PASSBOLT_KEY_EMAIL: ${EMAIL_FROM:-ismael.mouloungui@groupebatimat.com}
      
      # SÃ©curitÃ©
      PASSBOLT_REGISTRATION_PUBLIC: false
      
    volumes:
      - passbolt_gpg:/etc/passbolt/gpg
      - passbolt_jwt:/etc/passbolt/jwt
      - passbolt_images:/usr/share/php/passbolt/webroot/img/public/images
    networks:
      - passbolt_network
    depends_on:
      - database
    restart: unless-stopped

networks:
  passbolt_network:
    driver: bridge

volumes:
  passbolt_db_data:
  passbolt_gpg:
  passbolt_jwt:
  passbolt_images:
----------------------------------------- Config .env -----------------------------------------------------------------------------------------------
# =================================================
# FICHIER .env POUR PASSBOLT
# =================================================
# âš ï¸  IMPORTANT: Ne jamais commiter ce fichier !
# Ajouter .env dans .gitignore

# Configuration de l'application
APP_URL=https://localhost
# Pour production, remplace par ton vrai domaine :
# APP_URL=https://passbolt.mondomaine.com

# Configuration base de donnÃ©es
DB_ROOT_PASSWORD=ChangeMoi_RootPassword123!
DB_NAME=passbolt
DB_USER=passbolt
DB_PASSWORD=ChangeMoi_PassboltPassword123!

# ğŸ“§ CONFIGURATION GMAIL SMTP
EMAIL_FROM_NAME=Ã‰quipe Passbolt
EMAIL_FROM=ismael.mouloungui@groupebatimat.com

# ğŸ”‘ REMPLACE CES VALEURS PAR LES TIENNES
GMAIL_USERNAME=ismael.mouloungui@groupebatimat.com
GMAIL_APP_PASSWORD=abcd efgh ijkl mnop
# â˜ï¸ Le mot de passe d'application Gmail (16 caractÃ¨res avec espaces)

# Configuration GPG
GPG_KEY_NAME=Passbolt Server Key

# =================================================
# COMMENT OBTENIR LE MOT DE PASSE D'APPLICATION GMAIL
# =================================================
# 
# 1. Va sur myaccount.google.com
# 2. SÃ©curitÃ© â†’ Validation en 2 Ã©tapes (doit Ãªtre activÃ©e)
# 3. Mots de passe des applications â†’ SÃ©lectionner l'app "Mail"
# 4. GÃ©nÃ©rer â†’ Noter le mot de passe (16 caractÃ¨res)
# 5. Remplacer GMAIL_APP_PASSWORD ci-dessus
#
# =================================================

----------------------------------------------- ProcÃ©dure de mise Ã  jour ----------------------------------------------------------------------------
# =================================================
# PROCESSUS DE MISE Ã€ JOUR AVEC DOCKER ENGINE
# =================================================

# 1. MISE Ã€ JOUR DE LA CONFIGURATION
# ==================================

# Ã‰tape 1: ArrÃªter les services proprement
docker compose down

# Ã‰tape 2: Sauvegarder la configuration actuelle
cp docker-compose.yml docker-compose.yml.backup.$(date +%Y%m%d)
cp .env .env.backup.$(date +%Y%m%d) 2>/dev/null || true

# Ã‰tape 3: Ã‰diter la configuration
nano docker-compose.yml
# ou
nano .env

# Ã‰tape 4: VÃ©rifier la nouvelle configuration
docker compose config

# Ã‰tape 5: Relancer avec la nouvelle config
docker compose up -d

# 2. MISE Ã€ JOUR DE L'IMAGE PASSBOLT
# ==================================

# Voir la version actuelle
docker images | grep passbolt

# TÃ©lÃ©charger la nouvelle version
docker pull passbolt/passbolt:latest-ce

# ArrÃªter, mettre Ã  jour et redÃ©marrer
docker compose down
docker compose pull  # Met Ã  jour toutes les images
docker compose up -d

# VÃ©rifier les logs aprÃ¨s mise Ã  jour
docker compose logs -f passbolt

# 3. SAUVEGARDE AVANT MISE Ã€ JOUR
# ===============================

# Sauvegarder les volumes importants
docker run --rm -v passbolt_db_data:/data -v $(pwd):/backup ubuntu tar czf /backup/passbolt_db_backup_$(date +%Y%m%d).tar.gz -C /data .

docker run --rm -v passbolt_gpg:/data -v $(pwd):/backup ubuntu tar czf /backup/passbolt_gpg_backup_$(date +%Y%m%d).tar.gz -C /data .

# Exporter la base de donnÃ©es
docker exec passbolt_db mysqldump -u root -proot_password_super_secret passbolt > passbolt_db_dump_$(date +%Y%m%d).sql

# 4. RESTAURATION EN CAS DE PROBLÃˆME
# ==================================

# Revenir Ã  l'ancienne configuration
docker compose down
cp docker-compose.yml.backup.YYYYMMDD docker-compose.yml
docker compose up -d

# Restaurer un volume
docker run --rm -v passbolt_db_data:/data -v $(pwd):/backup ubuntu bash -c "cd /data && tar xzf /backup/passbolt_db_backup_YYYYMMDD.tar.gz"

# 5. SCRIPT D'AUTOMATISATION
# ==========================

#!/bin/bash
# update_passbolt.sh

set -e  # ArrÃªter en cas d'erreur

echo "ğŸ”„ Mise Ã  jour Passbolt..."

# Sauvegarde
echo "ğŸ’¾ Sauvegarde..."
docker compose down
cp docker-compose.yml docker-compose.yml.backup.$(date +%Y%m%d)

# Mise Ã  jour
echo "â¬‡ï¸ TÃ©lÃ©chargement des nouvelles images..."
docker compose pull

# RedÃ©marrage
echo "ğŸš€ RedÃ©marrage..."
docker compose up -d

# VÃ©rification
echo "âœ… VÃ©rification..."
sleep 30
docker compose ps

echo "âœ… Mise Ã  jour terminÃ©e !"
------------------------------------------------ Fin ----------------------------------------------------------------------------------------------

# =================================================
# STACK PASSBOLT POUR PORTAINER AVEC GMAIL SMTP  
# =================================================
# Ã€ copier dans Portainer > Stacks > Add Stack

services:
  # Base de donnÃ©es MariaDB
  passbolt_db:
    image: mariadb:10.11
    environment:
      MARIADB_ROOT_PASSWORD: ChangeMoi_RootPassword123!
      MARIADB_DATABASE: passbolt
      MARIADB_USER: passbolt
      MARIADB_PASSWORD: ChangeMoi_PassboltPassword123!
    volumes:
      - passbolt_db_data:/var/lib/mysql
    networks:
      - passbolt_net
    restart: unless-stopped
    command: --default-authentication-plugin=mysql_native_password
    healthcheck:
      test: ["CMD", "healthcheck.sh", "--connect", "--innodb_initialized"]
      start_period: 1m
      start_interval: 10s
      interval: 1m
      timeout: 5s
      retries: 3

  # Application Passbolt
  passbolt_app:
    image: passbolt/passbolt:4.7.0-1-ce
    ports:
      - "8080:80"
      - "8443:443"
    environment:
      # Configuration de base
      APP_FULL_BASE_URL: https://localhost:8443
      
      # Configuration base de donnÃ©es
      DATASOURCES_DEFAULT_HOST: passbolt_db
      DATASOURCES_DEFAULT_USERNAME: passbolt
      DATASOURCES_DEFAULT_PASSWORD: ChangeMoi_PassboltPassword123!
      DATASOURCES_DEFAULT_DATABASE: passbolt
      
      # ğŸ¯ CONFIGURATION GMAIL SMTP
      # âš ï¸ REMPLACE CES VALEURS PAR LES TIENNES !
      EMAIL_TRANSPORT_DEFAULT_CLASS_NAME: Smtp
      EMAIL_DEFAULT_FROM_NAME: Support IT
      EMAIL_DEFAULT_FROM: ismael.mouloungui@groupebatimat.com
      EMAIL_TRANSPORT_DEFAULT_HOST: smtp.gmail.com
      EMAIL_TRANSPORT_DEFAULT_PORT: 587
      EMAIL_TRANSPORT_DEFAULT_USERNAME: ismael.mouloungui@groupebatimat.com
      EMAIL_TRANSPORT_DEFAULT_PASSWORD: TON-MOT-DE-PASSE-APP-GMAIL
      EMAIL_TRANSPORT_DEFAULT_TLS: true
      EMAIL_TRANSPORT_DEFAULT_TIMEOUT: 30
      
      # Configuration GPG
      PASSBOLT_KEY_NAME: Passbolt Server Key
      PASSBOLT_KEY_EMAIL: ismael.mouloungui@groupebatimat.com
      
      # SÃ©curitÃ©
      PASSBOLT_REGISTRATION_PUBLIC: false
      PASSBOLT_SSL_FORCE: true
      
    volumes:
      - passbolt_gpg_data:/etc/passbolt/gpg
      - passbolt_jwt_data:/etc/passbolt/jwt
      - passbolt_images:/usr/share/php/passbolt/webroot/img/public/images
    networks:
      - passbolt_net
    depends_on:
      passbolt_db:
        condition: service_healthy
    restart: unless-stopped

networks:
  passbolt_net:
    driver: bridge

volumes:
  passbolt_db_data:
    driver: local
  passbolt_gpg_data:
    driver: local
  passbolt_jwt_data:
    driver: local
  passbolt_images:
    driver: local
---------------------------------------------------------- Fin -------------------------------------------------------------------------------------

# 1. CrÃ©er le projet
mkdir passbolt-prod && cd passbolt-prod

# 2. CrÃ©er le fichier .env
cat > .env << 'EOF'
# Remplace ces valeurs !
APP_URL=https://localhost
DB_ROOT_PASSWORD=ChangeMoi_RootPassword123!
DB_PASSWORD=ChangeMoi_PassboltPassword123!
EMAIL_FROM=ton-email@gmail.com
GMAIL_USERNAME=ton-email@gmail.com
GMAIL_APP_PASSWORD=ton-mot-de-passe-app-16-chars
EMAIL_FROM_NAME=Mon Ã‰quipe Passbolt
EOF

# 3. CrÃ©er le docker-compose.yml (utilise l'artifact gmail config)

# 4. Tester la configuration
docker compose config

# 5. DÃ©ployer
docker compose up -d

# 6. Suivre les logs
docker compose logs -f

# 7. CrÃ©er le premier admin (attendre 1-2 minutes)
------------------------------------------------------- Fin ----------------------------------------------------------------------------------------

# =================================================
# GESTION AVANCÃ‰E DES STACKS DOCKER
# =================================================

# 1. ORGANISATION DE TES PROJETS
# ==============================

# Structure recommandÃ©e :
# ~/docker-projects/
# â”œâ”€â”€ passbolt/
# â”‚   â”œâ”€â”€ docker-compose.yml
# â”‚   â””â”€â”€ .env
# â”œâ”€â”€ lamp/
# â”‚   â”œâ”€â”€ docker-compose.yml
# â”‚   â””â”€â”€ www/
# â””â”€â”€ monitoring/
#     â”œâ”€â”€ docker-compose.yml
#     â””â”€â”€ config/

# 2. SCRIPT DE GESTION GLOBAL
# ===========================

#!/bin/bash
# docker-manager.sh - GÃ©rer toutes tes stacks

PROJECTS_DIR=~/docker-projects

# Fonction pour lister tous les projets
list_all_stacks() {
    echo "ğŸ³ === TOUTES MES STACKS === ğŸ³"
    echo ""
    
    for project_dir in $PROJECTS_DIR/*/; do
        if [[ -f "$project_dir/docker-compose.yml" ]]; then
            project_name=$(basename "$project_dir")
            echo "ğŸ“ Projet: $project_name"
            echo "   ğŸ“ Chemin: $project_dir"
            
            cd "$project_dir"
            if docker compose ps -q &>/dev/null; then
                echo "   ğŸŸ¢ Status: $(docker compose ps --services | wc -l) services"
                docker compose ps --format "table {{.Name}}\t{{.Status}}"
            else
                echo "   ğŸ”´ Status: ArrÃªtÃ©"
            fi
            echo ""
        fi
    done
}

# Fonction pour dÃ©marrer une stack
start_stack() {
    local stack_name=$1
    local project_dir="$PROJECTS_DIR/$stack_name"
    
    if [[ -f "$project_dir/docker-compose.yml" ]]; then
        echo "ğŸš€ DÃ©marrage de $stack_name..."
        cd "$project_dir"
        docker compose up -d
        echo "âœ… $stack_name dÃ©marrÃ©"
    else
        echo "âŒ Stack '$stack_name' introuvable"
    fi
}

# Fonction pour arrÃªter une stack
stop_stack() {
    local stack_name=$1
    local project_dir="$PROJECTS_DIR/$stack_name"
    
    if [[ -f "$project_dir/docker-compose.yml" ]]; then
        echo "â¹ï¸ ArrÃªt de $stack_name..."
        cd "$project_dir"
        docker compose down
        echo "âœ… $stack_name arrÃªtÃ©"
    else
        echo "âŒ Stack '$stack_name' introuvable"
    fi
}

# Fonction pour voir les logs d'une stack
logs_stack() {
    local stack_name=$1
    local project_dir="$PROJECTS_DIR/$stack_name"
    
    if [[ -f "$project_dir/docker-compose.yml" ]]; then
        echo "ğŸ“‹ Logs de $stack_name..."
        cd "$project_dir"
        docker compose logs -f
    else
        echo "âŒ Stack '$stack_name' introuvable"
    fi
}

# Fonction principale
case "$1" in
    "list"|"ls")
        list_all_stacks
        ;;
    "start")
        start_stack "$2"
        ;;
    "stop")
        stop_stack "$2"
        ;;
    "logs")
        logs_stack "$2"
        ;;
    "status")
        docker compose ls
        ;;
    *)
        echo "Usage: $0 {list|start|stop|logs|status} [stack_name]"
        echo ""
        echo "Exemples:"
        echo "  $0 list                    # Lister toutes les stacks"
        echo "  $0 start passbolt         # DÃ©marrer la stack passbolt"
        echo "  $0 stop lamp              # ArrÃªter la stack lamp"
        echo "  $0 logs monitoring        # Voir les logs de monitoring"
        echo "  $0 status                 # Status global"
        ;;
esac

# 3. MONITORING EN TEMPS RÃ‰EL
# ===========================

# Voir l'utilisation des ressources de toutes les stacks
docker stats --format "table {{.Container}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.NetIO}}"

# Surveiller les logs de tous les projets
docker compose ls -q | xargs -I {} docker compose -p {} logs -f --tail=10

# 4. NETTOYAGE ET MAINTENANCE
# ===========================

# Nettoyer les conteneurs arrÃªtÃ©s de toutes les stacks
docker compose ls -q | xargs -I {} docker compose -p {} rm -f

# Supprimer les images inutilisÃ©es
docker image prune -f

# Supprimer les volumes orphelins
docker volume prune -f

# 5. SAUVEGARDE GLOBALE
# =====================

#!/bin/bash
# backup-all-stacks.sh

BACKUP_DIR=~/docker-backups/$(date +%Y%m%d)
mkdir -p $BACKUP_DIR

for project_dir in ~/docker-projects/*/; do
    project_name=$(basename "$project_dir")
    
    echo "ğŸ’¾ Sauvegarde de $project_name..."
    
    # Sauvegarde des fichiers de config
    cp -r "$project_dir" "$BACKUP_DIR/$project_name-config"
    
    # Sauvegarde des volumes
    cd "$project_dir"
    for volume in $(docker volume ls -q | grep "${project_name}"); do
        docker run --rm -v "$volume:/data" -v "$BACKUP_DIR:/backup" ubuntu tar czf "/backup/$volume.tar.gz" -C /data .
    done
done

echo "âœ… Sauvegarde terminÃ©e dans $BACKUP_DIR"
----------------------------------------------------- Fin ------------------------------------------------------------------------------------------

# Docker Engine vs Portainer : Guide de Choix

## ğŸ¯ Recommandation par Profil

### **DÃ©butant/IntermÃ©diaire â†’ Portainer**
- Interface visuelle pour comprendre les concepts
- Feedback immÃ©diat sur les actions
- Moins d'erreurs de syntaxe
- Courbe d'apprentissage plus douce

### **AvancÃ©/DevOps â†’ Docker Engine**
- ContrÃ´le total et prÃ©cision
- Scriptable et automatisable
- Performance optimale
- Standards de l'industrie

---

## ğŸ“Š Comparaison DÃ©taillÃ©e

| CritÃ¨re | Docker Engine | Portainer | Gagnant |
|---------|---------------|-----------|---------|
| **SÃ©curitÃ©** | â­â­â­â­â­ | â­â­â­â­ | Docker Engine |
| **Performance** | â­â­â­â­â­ | â­â­â­â­ | Docker Engine |
| **FacilitÃ© d'usage** | â­â­â­ | â­â­â­â­â­ | Portainer |
| **ContrÃ´le** | â­â­â­â­â­ | â­â­â­ | Docker Engine |
| **Monitoring** | â­â­ | â­â­â­â­â­ | Portainer |
| **Automatisation** | â­â­â­â­â­ | â­â­ | Docker Engine |
| **Apprentissage** | â­â­ | â­â­â­â­â­ | Portainer |

---

## ğŸ” SÃ©curitÃ©

### Docker Engine
```bash
âœ… Moins de surface d'attaque
âœ… Pas d'interface web exposÃ©e
âœ… ContrÃ´le granulaire des permissions
âœ… Audit trails natifs
âŒ Plus complexe Ã  sÃ©curiser correctement
```

### Portainer
```bash
âœ… Interface sÃ©curisÃ©e avec RBAC
âœ… Authentification centralisÃ©e
âœ… SSL/TLS intÃ©grÃ©
âŒ Interface web = surface d'attaque supplÃ©mentaire
âŒ Couche supplÃ©mentaire Ã  maintenir
```

---

## âš¡ Performance

### Docker Engine
```bash
âœ… Communication directe avec Docker daemon
âœ… Pas d'overhead d'interface
âœ… OptimisÃ© pour la production
âœ… Ressources minimales utilisÃ©es
```

### Portainer
```bash
âœ… Performance acceptable pour la plupart des cas
âŒ Overhead de l'interface web
âŒ RequÃªtes API supplÃ©mentaires
âŒ Consommation mÃ©moire/CPU de Portainer
```

---

## ğŸ¨ FacilitÃ© d'Usage

### Docker Engine
```bash
âŒ Courbe d'apprentissage abrupte
âŒ Syntaxe Ã  mÃ©moriser
âŒ Pas de feedback visuel
âœ… Documentation excellente
âœ… CommunautÃ© Ã©norme
```

### Portainer
```bash
âœ… Interface intuitive
âœ… Drag & drop pour certaines actions
âœ… Visualisation des logs en temps rÃ©el
âœ… Templates prÃªts Ã  l'emploi
âŒ Peut masquer la complexitÃ© sous-jacente
```

---

## ğŸš€ Ma Recommandation Progressive

### Phase 1 : Apprentissage (1-3 mois)
**Utilise Portainer** pour :
- Comprendre visuellement Docker
- Ã‰viter les erreurs de syntaxe
- Voir l'impact de tes actions
- Gagner en confiance

### Phase 2 : MaÃ®trise (3-6 mois)  
**Hybride : Portainer + Docker Engine**
- Portainer pour le monitoring/debugging
- Docker Engine pour les dÃ©ploiements
- Scripts Docker Engine pour l'automatisation

### Phase 3 : Production (6+ mois)
**Docker Engine principalement**
- Scripts d'automatisation
- CI/CD intÃ©grÃ©
- Infrastructure as Code
- Portainer comme outil d'appoint

---

## ğŸ­ Pour Ton Contexte Actuel

Vu que tu apprends et veux **comprendre ton infrastructure** :

### Recommandation : **Approche Hybride**

1. **Portainer** pour dÃ©buter :
   - Visualiser tes conteneurs
   - Comprendre les concepts
   - GÃ©rer facilement

2. **Docker Engine** en parallÃ¨le :
   - Apprendre les commandes
   - CrÃ©er des scripts
   - Comprendre le "pourquoi"

---

## ğŸ¯ Plan d'Action Concret

### Semaine 1-2 : Portainer
- Installer Portainer
- DÃ©ployer Passbolt via Portainer  
- Explorer l'interface
- Comprendre visuellement

### Semaine 3-4 : Docker Engine
- Refaire la mÃªme stack en CLI
- Comparer les approches
- CrÃ©er des scripts basiques

### Semaine 5+ : Hybride
- Portainer pour monitoring
- Docker Engine pour dÃ©ploiements
- Scripts pour automatisation

---

## âš ï¸ Points d'Attention

### Ã‰viter les PiÃ¨ges Portainer
- Ne pas devenir dÃ©pendant de l'interface
- Toujours comprendre les commandes sous-jacentes
- Versionner tes configurations (YAML)

### Ã‰viter les PiÃ¨ges Docker Engine
- Ne pas nÃ©gliger la surveillance
- Bien documenter tes scripts
- Mettre en place des backups